**Limitations of Stop-and-Wait**
- Since only 1 packet is transmitted in each RTT, we might have a very low utilization if the transmission time of the packet is small compared to RTT
$$
U_{SW} = \frac{L/R}{RTT + L/R}
$$
## 13.1 Pipelined Protocols
**Pipelining**: Sender allows multiple, "in-flight", yet to be acknowledged packets
- Range of sequence numbers must be increased
- Buffering at sender and/or receiver is needed
## 13.2 Forms of Pipelining
1. **Go-Back-N**
	- Allowed to transmit up to N unACKed packets
	- Retransmit all N packets if the first one is lost
2. **Selective Repeat**
	- Allowed to transmit up to N unACKed packets
	- Only retransmit the lost ones
## 13.3 Cumulative ACK
**Noncumulative**: $A(n)$ means: I have received packet $n$

**Cumulative**: $A(n)$ means: I have received all previous packets including $A(n)$ send me the next one
## 13.4 Go-Back-N
**Overview**
**Sender**: Up to N unACKed packets in pipeline

**Receiver**: Only sends cumulative ACKs
- Doesn't ACK packet if there's a gap

**Sender**: Has timer for oldest unACKed packet
- If timer expires: retransmits ALL unACKed packets

**Sender Action**
- "Window" of up to N consecutive unACKed packets allowed
- ACK(n): ACKs all packets up to including sequence number n - "cumulative ACK"
- Timer for each in-flight packet
	- Timeout(n): retransmit packet n and all higher sequence number packets in window

**Receiver**
- ACK-only: always send ACK for correctly-received packets so far, with the highest *in-order* sequence number
	- May generate duplicate ACKs
	- Need only remember the last not received packet
- On receipt of an out-of-order packet:
	- Can discard (don't buffer) or buffer: an implementation decision
	- re-ACK packet with highest in-order sequence number

- Q: What is the relationship between the number of bits in sequence number, m, and the window size N in Go-Back-N?

- The number of SN bits and the widow size
**Why N = $2^m-1$**: Total number of memory locations in TX and RX should be at most equal to $2^m$
