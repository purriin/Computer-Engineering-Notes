## 18.1 Network-Layer Services and Protocols
- Network layer protocols in every internet device: hosts, routers
- Router:
	- Examines header fields in all IP datagrams passing through it
	- Moves datagrams from input ports to output ports to transfer datagrams along end-end path

**2 Key Network-Level Functions**:
1. Forwarding: Move packets from a router's input link to appropriate router output link
2. Routing: Determine route taken by packets from source to destination (routing algorithms)

## 18.2 Network Layer: Data Plane, Control Plane
**Data Plane**:
- Local, per router function
- Determines how datagram arriving on router input port is forwarded to router output port

**Control Plane**:
- Network-wide logic
- Determines how datagram is routed among routers along end-end path form source host to destination host
- Two control-plane approaches:
	- **Traditional Routing Algorithms**: Implemented in routers
	- **Software-Defined Networking (SDN)**: Implemented in (remote) servers

**Per-Router Control Plane**:
- Individual routing algorithm components in each and every router interact in the control plane

**Software-Defined Network (SDN) Control Plane**:
- Remote controller computes, installs forwarding tables in routers

## 18.3 Network-Layer Service Model
**Internet "Best-Effort" Service Model**:
- No guarantees on:
	1. Successful datagram delivery to destination
	2. Timing or order of delivery
	3. Bandwidth available to end-end flow

**Reflections on Best-Effort Service**:
- Simplicity of mechanism has allowed internet to be widely deployed adopted
- Sufficient provisioning of bandwidth allows performance of real-time applications (e.g., interactive voice, video) to be "good enough" for "most of the time"
- Replicated application-layer distributed services (data centers, content distribution networks) connecting close to clients' networks allow services to be provided from multiple locations
- Congestion control of "elastic services help"

- Its hard to argue with success of best-effort service model
## 18.4 Router and Switch

### 18.4.1 Input Port Function
**Link Layer**: e.g., Ethernet

**Decentralized Switching**:
- Using header field values, lookup output port using forwarding table in input port memory ("match plus action")
- Goal: Complete input port processing at 'line speed'
- **Input Port Queuing**: If datagrams arrive faster than forwarding rate into switch fabric
- **Destination-Based Forwarding**: Forward based only on destination IP address (traditional)
- **Generalized Forwarding**: Forward based on any set of header field values

**Longest Prefix Match**: When looking for forwarding table entry for given destination address, use *longest* address prefix that matches destination address