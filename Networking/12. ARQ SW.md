- Complexity of reliable data transfer protocol will depend (strongly) on characteristics of unreliable channel (lose, corrupt, reorder data)
- Sender, receiver do *not* know the "state" of each other
	- Ex. was a message received?
	- Unless communicated via a message

## 12.1 Reliable Data Transfer: Getting Started
- Two steps are involved for reliable data transfer
	- Error Detection: The ability to find that an error has happened in the received data
	- Error Correction: The process of correcting the error
- In this course:
	- Error detection is done either by *checksum* or Cyclic Redundancy Check (CRC) codes
	- Error correction is fulfilled by retransmission of the packet

## 12.2 Automatic Repeat reQuest (ARQ)
- ARQ is the process of repeating a lost or errored packet
	- Packet with error: some bits have been changed from 1 to 0 or vice versa
	- Lost packet: never got to the destination
- With the misuse of terminology we sometimes call both of them as lost packets
- There are 3 different ARQ types
	1. Stop-and-wait (SW)
	2. Go-back-N (GBN)
	3. Select repeat (SR) (may also be called selective reject)

## 12.3 Handshaking in ARQ
- Underlying channel may flip bits in packet
	- Checksum to detect bit errors
- The question: how to recover from errors
	- Acknowledgements (ACKs): receiver explicitly tells sender that pkt received OK
	- Negative Acknowledgement (NAKs): receiver explicitly tells sender that pkt had errors
	- Sender retransmits pkt on receipt of NAK

**TCP Header**
- Sequence number is a field in the header of a packet using TCP which uniquely identifies the packet

**Time-Out**:
- What should be a good time-out value?
- Time-Out > RTT

## 12.4 A NAK-Free Protocol
- Instead of NAK, receiver sends ACK for last pkt received OK (or for next packet expecting)
	- Receiver must explicitly include sequence number of pkt being ACKed (acknowledgement number)
	- As we will see later, in practice the acknowledgement number is a pointer to the sequence number of the next (expecting) packet
- Duplicate ACK at sender results in same action as NAK: retransmit current pkt

### 12.4.1 Performance of Stop-and-Wait
- Ex. 1Gbps link 12ms prop. delay, 8000 bit packet:
	- T = L/R = 8000/10^9 = 8 microseconds
- What is the actual throughput we get on this link if Stop-and-Wait is used?

$$
U_{sender} = \frac{L/R}{L/R + RTT}
$$
$U_{sender}$: Utilization-fraction of time sender is busy sending
