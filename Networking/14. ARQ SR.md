## 14.1 Pipelined Protocols
**Pipelining**: Sender allows multiple "in-flight" yet-to-be-acknowledged packets
- Range of sequence numbers must be increased
- Buffering at sender and/or receiver is needed
- 2 generic forms of pipelined protocols:
	1. Go-Back-N
	2. Selective Repeat

- Go-Back-N (GBN) is not efficient on long-haul transmission links with high bandwidth

## 14.2 Selective Repeat
**Sender**
- Up to N unACKed packets in pipeline
- Maintains timer for each unACKed packet
	- If timer expired: retransmit only unACKed packet
- Data from above:
	- If next available sequence number in window, send packet
- Timeout(n):
	- Resend packet n, restart timer
- ACK(n) in \[sendbase, sendbase + N - 1]:
	- Mark packet n as received
	- If smallest unACKed packet advance window base to next unACKed sequence number

**Receiver**
- Receiver individually acknowledges all correctly received packets
- Buffer packets, as needed, for eventual in-order delivery to upper layer
- Packet n in\[rcvbase, rcvbase + N - 1]
	- Send ACK(n)
	- Out-of-order: buffer
	- In-order: deliver (also deliver buffered, in-order packets), advance window to next not-yet-received packet
- Packet n in \[rcvbase - N, rcvbase - 1]:
	- ACK(n)
- Otherwise: ignore

- Q: What is the relationship between the number of bits in sequence number, m, and the window size N in Selective Repeat?
- Window size = 3
## 14.3 Significantly Delayed ACKs
- If an ACK is delayed too long, it might arrive inside an active window with acceptable SN
- TCP extensions assume a 3 minute maximum lifetime in network

## 14.4 Absence of NACK
- When there are no NACK packet, the only way to find out about a lost packet is by timeout
	- This may not be an efficient way since usually timeout is very long
- Other alternative is to use cumulative ACK and multiple repeated ACKs

## 14.5 Fast Retransmission
- Upon receiving multiple duplicate ACKs the sender would send the lost packet and returns to its previous transmission order